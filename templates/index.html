<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link rel="stylesheet" href="/static/css/styles.css">
    <link rel="icon" href="/static/favicon.ico" type="image/x-icon">
    <title>Agenda de Trabalho</title>
</head>

<body class="bg-gray-100 p-2">
    <div class="mx-auto">
        <div class="bg-white rounded-lg shadow-lg p-3 mb-3">
            <div class="flex justify-between items-center mb-3">
                <div class="flex items-center">
                    <!-- Botão de menu mobile -->
                    <button id="mobile-menu-button" class="text-2xl mr-2 md:hidden" aria-label="Menu">
                        <i class="fas fa-bars"></i>
                    </button>
                    <div class="flex flex-col">
                        <h1 class="text-xl md:text-2xl font-bold">Agenda de Trabalho - <span
                                class="text-gray-600 text-sm md:text-base" id="userDisplayName"><b>Usuário:</b> </span>
                        </h1>

                        <!-- Active Schedule Selector Dropdown -->
                        <div class="mt-2 md:mt-1">
                            <label for="activeScheduleSelector" class="text-sm font-medium text-gray-700">Horário
                                Ativo:</label>
                            <select id="activeScheduleSelector" name="activeScheduleSelector"
                                class="mt-1 pl-3 pr-10 py-1 text-sm border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md">
                                <option>Carregando...</option>
                            </select>
                        </div>
                    </div>
                </div>
                <!-- Botões para desktop -->
                <div id="desktop-buttons" class="hidden md:flex gap-2">
                    <button onclick="openWorkplaceModal()"
                        class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 font-bold text-sm md:text-base">
                        <i class="fas fa-building mr-2"></i>1º - Locais de Trabalho
                    </button>
                    <button onclick="openSchedulesModal()"
                        class="bg-indigo-500 text-white px-4 py-2 rounded hover:bg-indigo-600 font-bold text-sm md:text-base">
                        <i class="fas fa-calendar-alt mr-2"></i>2º - Meus Horários
                    </button>
                    <button onclick="openAppointmentModal()"
                        class="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 font-bold text-sm md:text-base">
                        3º - Novo Compromisso <i class="fas fa-calendar-plus ml-2"></i>
                    </button>
                    <button onclick="openHelpModal()"
                        class="bg-yellow-500 text-white px-4 py-2 rounded hover:bg-yellow-600 font-bold text-sm md:text-base">
                        <i class="fas fa-question mr-2"></i>Ajuda
                    </button>
                    <button onclick="shareCalendar(); closeMenu();"
                        class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 font-bold text-sm md:text-base">
                        <i class="fas fa-share-alt mr-2"></i>Compartilhar
                    </button>
                    <button onclick="logout()"
                        class="bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600 font-bold text-sm md:text-base">
                        Sair<i class="fas fa-sign-out-alt ml-2"></i>
                    </button>
                </div>
                <!-- Botão de adicionar para mobile (fixo) -->
                <button onclick="openAppointmentModal()"
                    class="md:hidden bg-green-500 text-white p-2 rounded-full shadow-lg">
                    <i class="fas fa-plus"></i>
                </button>
            </div>

            <!-- Container de navegação entre dias (para mobile) -->
            <div id="day-navigation" class="hidden"></div>

            <!-- Calendário -->
            <div id="calendar" class="grid gap-2"></div>
        </div>

        <div class="bg-white rounded-lg shadow-lg p-4 md:p-6 mt-6">
            <div class="grid grid-cols-1 gap-4 mb-8">
                <div class="p-4 rounded bg-gray-100">
                    <div class="flex flex-col md:flex-row justify-between items-center mb-2">
                        <h3 class="font-bold text-lg md:text-xl mb-2 md:mb-0">Resumo por Local de Trabalho</h3>
                        <select id="periodSelect" class="p-2 border rounded w-full md:w-auto"
                            onchange="atualizarRelatorios()">
                            <option value="week">Esta Semana</option>
                            <option value="month">Este Mês</option>
                        </select>
                    </div>
                    <div id="workplaceSummaries" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                        <!-- Aqui entram os cards de resumo de cada local de trabalho -->
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="p-4 rounded bg-gray-100">
                    <h3 class="font-bold mb-2">Resumo Semanal</h3>
                    <div id="weeklySummary" class="space-y-1">
                        <p>Total Horas: <span class="text-xl total-hours">0h</span></p>
                        <p>Valor Total: R$<span class="total-value">0,00</span></p>
                    </div>
                </div>
                <div class="p-4 rounded bg-gray-100">
                    <h3 class="font-bold mb-2">Resumo Mensal</h3>
                    <div id="monthlySummary" class="space-y-1">
                        <p>Total Horas: <span class="text-xl total-hours">0h</span></p>
                        <p>Valor Total: R$<span class="total-value">0,00</span></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Menu Sanduíche Móvel -->
    <div id="mobile-menu-overlay" class="mobile-menu-overlay"></div>
    <div id="mobile-menu" class="mobile-menu p-4">
        <div class="flex justify-between items-center mb-6">
            <h2 class="text-lg font-bold">Menu</h2>
            <button id="close-menu-button" class="text-xl">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="flex flex-col space-y-4">
            <button onclick="openWorkplaceModal(); closeMenu();"
                class="bg-blue-500 text-white px-4 py-3 rounded hover:bg-blue-600 font-bold w-full text-left">
                <i class="fas fa-building mr-2"></i>1º - Locais de Trabalho
            </button>
            <button onclick="openSchedulesModal(); closeMenu();"
                class="bg-indigo-500 text-white px-4 py-3 rounded hover:bg-indigo-600 font-bold w-full text-left">
                <i class="fas fa-calendar-alt mr-2"></i>2º - Meus Horários
            </button>
            <button onclick="openAppointmentModal(); closeMenu();"
                class="bg-green-500 text-white px-4 py-3 rounded hover:bg-green-600 font-bold w-full text-left">
                <i class="fas fa-calendar-plus mr-2"></i>3º - Novo Compromisso
            </button>
            <button onclick="openHelpModal(); closeMenu();"
                class="bg-yellow-500 text-white px-4 py-3 rounded hover:bg-yellow-600 font-bold w-full text-left">
                <i class="fas fa-question-circle mr-2"></i>Ajuda
            </button>
            <hr class="my-2 border-gray-300">
            <button onclick="logout()"
                class="bg-red-500 text-white px-4 py-3 rounded hover:bg-red-600 font-bold w-full text-left">
                <i class="fas fa-sign-out-alt mr-2"></i>Sair
            </button>
        </div>
    </div>
    <!-- Modal Locais de Trabalho -->
    <div id="workplaceModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center">
        <div class="bg-white p-4 md:p-6 rounded-lg w-[95%] md:w-[800px] max-h-[90vh] overflow-y-auto">
            <h2 class="text-xl font-bold mb-4">Gerenciar Locais de Trabalho</h2>
            <div id="workplacesList" class="space-y-4 mb-6">
                <!-- Aqui serão inseridos os locais de trabalho -->
            </div>
            <button id="addWorkplaceBtn" class="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 mb-4">
                <i class="fas fa-plus mr-2"></i>Adicionar Local de Trabalho
            </button>
            <div id="workplaceForm" class="hidden border p-4 rounded mb-4">
                <h3 class="font-bold mb-2" id="workplaceFormTitle">Novo Local de Trabalho</h3>
                <form id="newWorkplaceForm" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <input type="hidden" id="workplaceId">
                    <div>
                        <label class="block text-sm mb-1 font-bold">Nome</label>
                        <input type="text" id="workplaceName" class="w-full p-2 border rounded" required>
                    </div>
                    <div>
                        <label class="block text-sm mb-1 font-bold">Cor</label>
                        <input type="color" id="workplaceColor" class="w-full p-1 h-10 border rounded">
                    </div>
                    <div>
                        <label class="block text-sm mb-1 font-bold">Acréscimo Hora-Aula (%)</label>
                        <input type="number" id="workplaceBonus" class="w-full p-2 border rounded" min="0" max="100"
                            step="1" value="0">
                    </div>
                    <div>
                        <label class="block text-sm mb-1 font-bold">Período de Carência (minutos)</label>
                        <input type="number" id="workplaceGrace" class="w-full p-2 border rounded" min="0" step="5"
                            value="60">
                    </div>
                    <div>
                        <label class="block text-sm mb-1 font-bold">Relacionado com</label>
                        <select id="workplaceRelated" class="w-full p-2 border rounded">
                            <option value="">Nenhum</option>
                            <!-- Aqui serão inseridas as opções de locais relacionados -->
                        </select>
                    </div>
                    <div class="md:col-span-2 flex justify-end gap-2">
                        <button type="button" onclick="hideWorkplaceForm()"
                            class="bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600">Cancelar</button>
                        <button type="submit"
                            class="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600">Salvar</button>
                    </div>
                </form>
            </div>
            <div class="flex justify-end mt-4">
                <button onclick="closeWorkplaceModal()"
                    class="bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600">Fechar</button>
            </div>
        </div>
    </div>

    <!-- Modal Compromisso -->
    <div id="appointmentModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center">
        <div class="bg-white p-4 md:p-6 rounded-lg w-[95%] md:w-[600px] max-h-[90vh] overflow-y-auto">
            <h2 class="text-xl font-bold mb-4" id="appointmentFormTitle">Novo Compromisso</h2>
            <form id="appointmentForm">
                <input type="hidden" id="editingId">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="mb-4">
                        <label class="block mb-2 font-bold">Dia da Semana</label>
                        <select id="dayOfWeek" class="w-full p-2 border rounded" required>
                            <option value="1">Segunda</option>
                            <option value="2">Terça</option>
                            <option value="3">Quarta</option>
                            <option value="4">Quinta</option>
                            <option value="5">Sexta</option>
                            <option value="6">Sábado</option>
                            <option value="0">Domingo</option>
                        </select>
                    </div>
                    <div class="mb-4">
                        <label class="block mb-2 font-bold">Local de Trabalho</label>
                        <select id="workplace" class="w-full p-2 border rounded" required>
                            <!-- Aqui serão inseridas as opções de locais de trabalho -->
                        </select>
                    </div>
                </div>
                <div class="mb-4">
                    <label class="block mb-2 font-bold">Tipo de Hora</label>
                    <div class="flex gap-4 justify-between">
                        <label class="items-center">
                            <input type="radio" name="hourType" value="HA" class="form-radio" checked required>
                            <span class="ml-2">Hora Aula (HA)</span>
                        </label>
                        <label class="items-center">
                            <input type="radio" name="hourType" value="HAE" class="form-radio">
                            <span class="ml-2">HAE</span>
                        </label>
                        <label class="items-center">
                            <input type="radio" name="hourType" value="HT" class="form-radio">
                            <span class="ml-2">Hora Trabalho (HT)</span>
                        </label>
                    </div>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div class="mb-4">
                        <label class="block mb-2 font-bold">Horário de Entrada</label>
                        <input type="time" id="startTime" class="w-full p-2 border rounded text-center" required
                            onchange="calculateDuration()">
                    </div>
                    <div class="mb-4">
                        <label class="block mb-2 font-bold">Horário de Saída</label>
                        <input type="time" id="endTime" class="w-full p-2 border rounded text-center" required
                            onchange="calculateDuration()">
                    </div>
                    <div class="mb-4">
                        <label class="block mb-2 font-bold">Duração (horas)</label>
                        <input type="number" id="duration" class="w-full p-2 border rounded text-center" step="0.5"
                            min="0.5">
                    </div>
                </div>
                <div class="mb-4">
                    <label class="block mb-2 font-bold">Descrição</label>
                    <textarea id="description" class="w-full p-2 border rounded"></textarea>
                </div>
                <div class="flex justify-between">
                    <button type="button" onclick="closeAppointmentModal()"
                        class="bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600">Cancelar</button>
                    <button type="submit"
                        class="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal de Ajuda -->
    <div id="helpModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white p-6 rounded-lg w-[1000px] max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-2xl font-bold">Ajuda - Agenda de Trabalho</h2>
                <button onclick="closeHelpModal()" class="text-gray-600 hover:text-gray-800">
                    <i class="fas fa-times text-2xl"></i>
                </button>
            </div>

            <div class="space-y-8">
                <!-- Boas-vindas -->
                <div
                    class="text-center bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-xl border-l-4 border-blue-500">
                    <div class="text-4xl mb-3">👋</div>
                    <h2 class="text-2xl font-bold text-blue-800 mb-2">Bem-vindo à sua Agenda de Trabalho!</h2>
                    <p class="text-lg text-blue-700">Organize seus horários, calcule seus ganhos e tenha controle total
                        da sua agenda profissional</p>
                </div>

                <!-- O que é o sistema -->
                <div class="bg-green-50 p-6 rounded-xl border-l-4 border-green-500">
                    <h3 class="text-xl font-bold text-green-800 mb-3 flex items-center">
                        <i class="fas fa-lightbulb mr-2"></i>
                        O que é este sistema?
                    </h3>
                    <p class="text-green-700 leading-relaxed">
                        É sua agenda digital inteligente! Perfeita para professores, consultores, freelancers e
                        profissionais que trabalham
                        em múltiplos locais. O sistema calcula automaticamente quanto você vai ganhar por semana e por
                        mês,
                        respeitando as regras trabalhistas brasileiras.
                    </p>
                </div>

                <!-- Passo a passo -->
                <div>
                    <h3 class="text-2xl font-bold text-gray-800 mb-6 text-center">
                        <i class="fas fa-map-marked-alt mr-2 text-blue-600"></i>
                        Como começar? Siga estes 3 passos simples:
                    </h3>

                    <div class="grid gap-6">
                        <!-- Passo 1 -->
                        <div
                            class="bg-white border-2 border-blue-200 rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow">
                            <div class="flex items-start space-x-4">
                                <div
                                    class="bg-blue-500 text-white rounded-full w-12 h-12 flex items-center justify-center text-xl font-bold">
                                    1</div>
                                <div class="flex-1">
                                    <h4 class="text-xl font-bold text-blue-700 mb-3">
                                        <i class="fas fa-building mr-2"></i>
                                        Cadastre seus Locais de Trabalho
                                    </h4>
                                    <p class="text-gray-700 mb-4">
                                        Primeiro, vamos cadastrar onde você trabalha. Pode ser escolas, empresas,
                                        consultórios, ou qualquer lugar onde você presta serviços.
                                    </p>
                                    <div class="bg-blue-50 p-4 rounded-lg">
                                        <p class="font-semibold text-blue-800 mb-2">Para cada local, você vai
                                            configurar:</p>
                                        <ul class="list-disc list-inside text-blue-700 space-y-1">
                                            <li><strong>Nome:</strong> Ex: "Escola Municipal João Silva"</li>
                                            <li><strong>Cor:</strong> Para identificar visualmente na agenda</li>
                                            <li><strong>Tempo de deslocamento:</strong> Quantos minutos você precisa
                                                entre um local e outro</li>
                                            <li><strong>Bônus para aulas:</strong> Se você é professor e recebe
                                                adicional nas aulas</li>
                                            <li><strong>Locais relacionados:</strong> Se dois locais fazem parte da
                                                mesma empresa/escola</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Passo 2 -->
                        <div
                            class="bg-white border-2 border-indigo-200 rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow">
                            <div class="flex items-start space-x-4">
                                <div
                                    class="bg-indigo-500 text-white rounded-full w-12 h-12 flex items-center justify-center text-xl font-bold">
                                    2</div>
                                <div class="flex-1">
                                    <h4 class="text-xl font-bold text-indigo-700 mb-3">
                                        <i class="fas fa-calendar-alt mr-2"></i>
                                        Crie sua Agenda (Horário)
                                    </h4>
                                    <p class="text-gray-700 mb-4">
                                        Agora vamos criar sua agenda semanal. Você pode ter várias agendas para
                                        diferentes períodos do ano.
                                    </p>
                                    <div class="bg-indigo-50 p-4 rounded-lg">
                                        <p class="font-semibold text-indigo-800 mb-2">Ao criar uma agenda, você define:
                                        </p>
                                        <ul class="list-disc list-inside text-indigo-700 space-y-1">
                                            <li><strong>Nome:</strong> Ex: "Horário 1º Semestre 2025"</li>
                                            <li><strong>Período:</strong> Data de início e fim</li>
                                            <li><strong>Dias da semana:</strong> Quais dias você trabalha</li>
                                            <li><strong>Valores por hora:</strong> Quanto você ganha em cada local</li>
                                            <li><strong>Horário padrão:</strong> Quando sua jornada começa e termina
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Passo 3 -->
                        <div
                            class="bg-white border-2 border-green-200 rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow">
                            <div class="flex items-start space-x-4">
                                <div
                                    class="bg-green-500 text-white rounded-full w-12 h-12 flex items-center justify-center text-xl font-bold">
                                    3</div>
                                <div class="flex-1">
                                    <h4 class="text-xl font-bold text-green-700 mb-3">
                                        <i class="fas fa-calendar-plus mr-2"></i>
                                        Adicione seus Compromissos
                                    </h4>
                                    <p class="text-gray-700 mb-4">
                                        Agora é só marcar seus horários de trabalho! O sistema vai organizar tudo
                                        visualmente e calcular seus ganhos.
                                    </p>
                                    <div class="bg-green-50 p-4 rounded-lg">
                                        <p class="font-semibold text-green-800 mb-2">Para cada compromisso, informe:</p>
                                        <ul class="list-disc list-inside text-green-700 space-y-1">
                                            <li><strong>Dia da semana:</strong> Segunda, terça, etc.</li>
                                            <li><strong>Local de trabalho:</strong> Onde será o compromisso</li>
                                            <li><strong>Horário:</strong> Entrada e saída</li>
                                            <li><strong>Tipo de hora:</strong> Aula (HA), Administrativa (HT), etc.</li>
                                            <li><strong>Descrição:</strong> O que você vai fazer</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tipos de hora explicados -->
                <div class="bg-yellow-50 p-6 rounded-xl border-l-4 border-yellow-500">
                    <h3 class="text-xl font-bold text-yellow-800 mb-4 flex items-center">
                        <i class="fas fa-clock mr-2"></i>
                        Entendendo os Tipos de Hora
                    </h3>
                    <div class="grid md:grid-cols-3 gap-4">
                        <div class="bg-white p-4 rounded-lg border border-yellow-200">
                            <h4 class="font-bold text-yellow-800 mb-2">HA - Hora Aula</h4>
                            <p class="text-yellow-700 text-sm">Para professores. Pode ter bônus adicional configurado no
                                local de trabalho.</p>
                        </div>
                        <div class="bg-white p-4 rounded-lg border border-yellow-200">
                            <h4 class="font-bold text-yellow-800 mb-2">HAE - Hora Atividade Específica</h4>
                            <p class="text-yellow-700 text-sm">Atividades especiais como coordenação, supervisão, etc.
                            </p>
                        </div>
                        <div class="bg-white p-4 rounded-lg border border-yellow-200">
                            <h4 class="font-bold text-yellow-800 mb-2">HT - Hora Trabalho</h4>
                            <p class="text-yellow-700 text-sm">Trabalho administrativo, reuniões, ou outras atividades.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Regras importantes -->
                <div class="bg-red-50 p-6 rounded-xl border-l-4 border-red-500">
                    <h3 class="text-xl font-bold text-red-800 mb-4 flex items-center">
                        <i class="fas fa-shield-alt mr-2"></i>
                        Proteções Trabalhistas Automáticas
                    </h3>
                    <p class="text-red-700 mb-4">O sistema protege você automaticamente seguindo as leis trabalhistas
                        brasileiras:</p>
                    <div class="grid md:grid-cols-2 gap-4">
                        <div class="bg-white p-4 rounded-lg border border-red-200">
                            <h4 class="font-bold text-red-800 mb-2">
                                <i class="fas fa-clock text-red-600 mr-2"></i>
                                Máximo 8h por dia
                            </h4>
                            <p class="text-red-700 text-sm">Em locais relacionados (mesma empresa), você não pode
                                trabalhar mais de 8 horas por dia.</p>
                        </div>
                        <div class="bg-white p-4 rounded-lg border border-red-200">
                            <h4 class="font-bold text-red-800 mb-2">
                                <i class="fas fa-route text-red-600 mr-2"></i>
                                Tempo de deslocamento
                            </h4>
                            <p class="text-red-700 text-sm">Respeita o tempo mínimo entre compromissos em locais
                                diferentes.</p>
                        </div>
                        <div class="bg-white p-4 rounded-lg border border-red-200">
                            <h4 class="font-bold text-red-800 mb-2">
                                <i class="fas fa-bed text-red-600 mr-2"></i>
                                Máximo 6h contínuas
                            </h4>
                            <p class="text-red-700 text-sm">Não permite compromissos de mais de 6 horas seguidas.</p>
                        </div>
                        <div class="bg-white p-4 rounded-lg border border-red-200">
                            <h4 class="font-bold text-red-800 mb-2">
                                <i class="fas fa-moon text-red-600 mr-2"></i>
                                11h de descanso
                            </h4>
                            <p class="text-red-700 text-sm">Garante 11 horas de descanso entre o último compromisso de
                                um dia e o primeiro do dia seguinte.</p>
                        </div>
                    </div>
                </div>

                <!-- Benefícios -->
                <div class="bg-purple-50 p-6 rounded-xl border-l-4 border-purple-500">
                    <h3 class="text-xl font-bold text-purple-800 mb-4 flex items-center">
                        <i class="fas fa-star mr-2"></i>
                        O que você ganha usando este sistema
                    </h3>
                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="space-y-3">
                            <div class="flex items-center space-x-3">
                                <i class="fas fa-calculator text-purple-600 text-xl"></i>
                                <span class="text-purple-700"><strong>Cálculos automáticos</strong> dos seus ganhos
                                    semanais e mensais</span>
                            </div>
                            <div class="flex items-center space-x-3">
                                <i class="fas fa-eye text-purple-600 text-xl"></i>
                                <span class="text-purple-700"><strong>Visualização clara</strong> da sua agenda em
                                    cores</span>
                            </div>
                            <div class="flex items-center space-x-3">
                                <i class="fas fa-share-alt text-purple-600 text-xl"></i>
                                <span class="text-purple-700"><strong>Compartilhamento</strong> da agenda com colegas e
                                    família</span>
                            </div>
                        </div>
                        <div class="space-y-3">
                            <div class="flex items-center space-x-3">
                                <i class="fas fa-mobile-alt text-purple-600 text-xl"></i>
                                <span class="text-purple-700"><strong>Acesso pelo celular</strong> em qualquer
                                    lugar</span>
                            </div>
                            <div class="flex items-center space-x-3">
                                <i class="fas fa-chart-line text-purple-600 text-xl"></i>
                                <span class="text-purple-700"><strong>Relatórios detalhados</strong> por local de
                                    trabalho</span>
                            </div>
                            <div class="flex items-center space-x-3">
                                <i class="fas fa-copy text-purple-600 text-xl"></i>
                                <span class="text-purple-700"><strong>Clonar agendas</strong> para novos
                                    semestres/períodos</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Dicas rápidas -->
                <div class="bg-gray-50 p-6 rounded-xl border-l-4 border-gray-400">
                    <h3 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                        <i class="fas fa-lightbulb mr-2"></i>
                        Dicas de Ouro para Usar Melhor
                    </h3>
                    <div class="grid md:grid-cols-2 gap-4 text-sm">
                        <div class="space-y-2">
                            <p class="flex items-start space-x-2">
                                <i class="fas fa-palette text-gray-600 mt-0.5"></i>
                                <span><strong>Use cores diferentes</strong> para cada local - fica mais fácil de
                                    enxergar na agenda</span>
                            </p>
                            <p class="flex items-start space-x-2">
                                <i class="fas fa-link text-gray-600 mt-0.5"></i>
                                <span><strong>Configure relacionamentos</strong> entre locais da mesma empresa para
                                    controle correto das 8h diárias</span>
                            </p>
                            <p class="flex items-start space-x-2">
                                <i class="fas fa-copy text-gray-600 mt-0.5"></i>
                                <span><strong>Clone agendas</strong> quando o semestre acabar - economiza tempo
                                    reescrevendo tudo</span>
                            </p>
                        </div>
                        <div class="space-y-2">
                            <p class="flex items-start space-x-2">
                                <i class="fas fa-mobile text-gray-600 mt-0.5"></i>
                                <span><strong>No celular</strong>, deslize entre os dias da semana com os botões de
                                    navegação</span>
                            </p>
                            <p class="flex items-start space-x-2">
                                <i class="fas fa-money-bill-wave text-gray-600 mt-0.5"></i>
                                <span><strong>Atualize os valores</strong> sempre que houver reajuste salarial</span>
                            </p>
                            <p class="flex items-start space-x-2">
                                <i class="fas fa-chart-bar text-gray-600 mt-0.5"></i>
                                <span><strong>Consulte os relatórios</strong> regularmente para acompanhar seus
                                    ganhos</span>
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Call to action -->
                <div
                    class="text-center bg-gradient-to-r from-green-50 to-blue-50 p-8 rounded-xl border-2 border-green-200">
                    <div class="text-4xl mb-4">🚀</div>
                    <h3 class="text-2xl font-bold text-gray-800 mb-3">Pronto para começar?</h3>
                    <p class="text-lg text-gray-700 mb-4">
                        Que tal cadastrar seu primeiro local de trabalho agora mesmo?
                    </p>
                    <p class="text-sm text-gray-600">
                        Clique no botão <strong class="text-blue-600">"1º - Locais de Trabalho"</strong> e vamos
                        começar!
                    </p>
                </div>
            </div>

            <div class="mt-6 text-center">
                <button onclick="closeHelpModal()"
                    class="bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 font-bold">
                    Entendi
                </button>
            </div>
        </div>
    </div>

    <div id="shareModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white p-4 md:p-6 rounded-lg w-[95%] md:w-[600px] max-h-[90vh] overflow-y-auto">
            <h2 class="text-xl font-bold mb-4">Compartilhar Agenda</h2>
            <p class="mb-4">Use o link abaixo para compartilhar sua agenda. Qualquer pessoa com este link poderá
                visualizar os compromissos desta agenda.</p>

            <div class="bg-blue-50 border border-blue-200 rounded p-3 mb-4">
                <p class="text-sm text-blue-800">
                    <i class="fas fa-info-circle mr-1"></i>
                    Este link permite visualização pública sem necessidade de login. Os valores financeiros não serão
                    exibidos.
                </p>
            </div>

            <div class="flex items-center mb-6">
                <input type="text" id="shareLink" class="flex-grow p-2 border rounded-l" readonly
                    placeholder="Selecione uma agenda para gerar o link">
                <button onclick="copyShareLink()"
                    class="bg-blue-500 text-white p-2 rounded-r border-blue-500 hover:bg-blue-600 disabled:bg-gray-400"
                    id="copyLinkBtn" disabled>
                    <i class="fas fa-copy"></i>
                </button>
            </div>

            <div class="flex justify-between">
                <button onclick="closeShareModal()"
                    class="bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600">Fechar</button>
                <button onclick="copyShareLink()"
                    class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 disabled:bg-gray-400"
                    id="copyLinkBtn2" disabled>
                    <i class="fas fa-copy mr-2"></i>Copiar Link
                </button>
            </div>
        </div>
    </div>

    <!-- Importação dos módulos JavaScript -->
    <script type="module" src="/static/js/app.js"></script>

    <!-- Modal Meus Horários -->
    <div id="schedulesModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-40">
        <div class="bg-white p-4 md:p-6 rounded-lg w-[95%] md:w-[800px] max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-xl font-bold">Meus Horários</h2>
                <button onclick="closeSchedulesModal()"
                    class="text-gray-600 hover:text-gray-800 text-xl">&times;</button>
            </div>

            <div id="schedulesList" class="space-y-3 mb-6">
                <!-- Schedules will be listed here by JS -->
                <p class="text-gray-500 italic">Carregando horários...</p>
            </div>

            <div class="flex gap-2 mb-4">
                <button id="addScheduleBtn" class="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600">
                    <i class="fas fa-plus mr-2"></i>Adicionar Novo Horário
                </button>
                <button id="cloneScheduleBtn" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">
                    <i class="fas fa-copy mr-2"></i>Clonar Horário Existente
                </button>
            </div>

            <div id="scheduleFormContainer" class="hidden border p-4 rounded">
                <h3 class="font-bold mb-3" id="scheduleFormTitle">Novo Horário</h3>
                <form id="newScheduleForm" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <input type="hidden" id="scheduleId">
                    <div>
                        <label for="scheduleName" class="block text-sm mb-1 font-bold">Nome do Horário</label>
                        <input type="text" id="scheduleName" class="w-full p-2 border rounded" required>
                    </div>
                    <div>
                        <!-- Placeholder for potential other fields or to balance grid -->
                    </div>
                    <div>
                        <label for="scheduleStartDate" class="block text-sm mb-1 font-bold">Data de Início</label>
                        <input type="date" id="scheduleStartDate" class="w-full p-2 border rounded" required>
                    </div>
                    <div>
                        <label for="scheduleEndDate" class="block text-sm mb-1 font-bold">Data de Fim</label>
                        <input type="date" id="scheduleEndDate" class="w-full p-2 border rounded" required>
                    </div>
                    <div class="md:col-span-2 flex justify-end gap-2 mt-3">
                        <button type="button" id="cancelNewScheduleBtn"
                            class="bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600">Cancelar</button>
                        <button type="submit"
                            class="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600">Salvar Horário</button>
                    </div>
                </form>
            </div>
            <div class="flex justify-end mt-4">
                <button onclick="closeSchedulesModal()"
                    class="bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600">Fechar</button>
            </div>
        </div>
    </div>

    <!-- Modal Configurar Horário -->
    <div id="scheduleConfigModal"
        class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white p-4 md:p-6 rounded-lg w-[95%] md:w-[900px] max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-xl font-bold">Configurar Horário: <span id="configScheduleNameDisplay"></span></h2>
                <button onclick="closeScheduleConfigModal()"
                    class="text-gray-600 hover:text-gray-800 text-xl">&times;</button>
            </div>
            <input type="hidden" id="configScheduleId">

            <!-- Nav Tabs for Configuration -->
            <div class="border-b border-gray-200 mb-4">
                <nav class="-mb-px flex space-x-8" aria-label="Tabs">
                    <button onclick="showConfigTab('financeiro')" id="tabButtonFinanceiro"
                        class="whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm border-indigo-500 text-indigo-600">
                        Financeiro (Valor/Hora)
                    </button>
                    <button onclick="showConfigTab('calendario')" id="tabButtonCalendario"
                        class="whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300">
                        Calendário (Dias/Horas Padrão)
                    </button>
                </nav>
            </div>

            <!-- Financial Configuration Tab -->
            <div id="configTabFinanceiro">
                <h3 class="text-lg font-semibold mb-3">Definir Valor/Hora por Local de Trabalho</h3>
                <div id="workplaceRatesContainer" class="space-y-3 max-h-[300px] overflow-y-auto mb-4 pr-2">
                    <!-- Workplace rates will be listed here by JS -->
                    <p class="text-gray-500 italic">Carregando locais...</p>
                </div>
                <div class="flex justify-end gap-2 mt-4">
                    <button type="button" onclick="closeScheduleConfigModal()"
                        class="bg-gray-400 text-white px-4 py-2 rounded hover:bg-gray-500">Cancelar</button>
                    <button id="saveFinancialConfigBtn"
                        class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">Salvar Config.
                        Financeira</button>
                </div>
            </div>

            <!-- Calendar Configuration Tab (Initially Hidden) -->
            <div id="configTabCalendario" class="hidden">
                <h3 class="text-lg font-semibold mb-3">Definir Dias da Semana e Horários Padrão</h3>
                <div class="mb-4">
                    <label class="block mb-2 font-bold">Dias da Semana Ativos</label>
                    <div id="scheduleDaysOfWeekContainer" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2">
                        <!-- Day checkboxes will be populated by JS -->
                    </div>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                    <div>
                        <label for="scheduleDefaultStartTime" class="block mb-1 font-bold">Horário Padrão de
                            Início</label>
                        <input type="time" id="scheduleDefaultStartTime" class="w-full p-2 border rounded text-center">
                    </div>
                    <div>
                        <label for="scheduleDefaultEndTime" class="block mb-1 font-bold">Horário Padrão de
                            Término</label>
                        <input type="time" id="scheduleDefaultEndTime" class="w-full p-2 border rounded text-center">
                    </div>
                </div>
                <div class="flex justify-end gap-2 mt-4">
                    <button type="button" onclick="closeScheduleConfigModal()"
                        class="bg-gray-400 text-white px-4 py-2 rounded hover:bg-gray-500">Cancelar</button>
                    <button id="saveCalendarConfigBtn"
                        class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">Salvar Config.
                        Calendário</button>
                </div>
            </div>
        </div>
    </div>
</body>

</html>